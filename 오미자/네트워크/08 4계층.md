# 4계층(전송 계층)

지금까지 2계층은 가까운 컴퓨터끼리 통신,  3계층은 다른 네트워크 대역을 넘어가 통신한다는 것을 공부하였다!

다른 사람의 컴퓨터에 동작하고 있는 특정 프로그램과 내 컴퓨터에서 동작하고 있는 특정 프로그램이 서로 어떻게 데이터를 주고 받는지에 대해서 알아보자



## 4계층에서 하는 일

- 송신자의 프로세스와 수신자의 프로세스를 연결하는 통신 서비스를 제공한다.

  ** 프로세스: 메모리에서 동작중인 프로그램

- 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어, 다중화와 같은 서비스 제공

- ex) TCP, UDP

  - TCP: 연결 지향형 프로토콜 -> 연결이 되고 난 다음에 데이터를 보내고, 응답도 요청한다.
  - UDP: 비연결지향형 프로토콜  -> 연결을 하든 말든 데이터를 던져버림





## 포트번호

- 특정 프로세스가 사용하며, 하나의 포트는 하나의 프로세스만 사용 가능하다.
- 특정 프로세스와 특정 프로세스가 통신하기 위해서 사용한다.
- 하나의 프로세스가 여러개의 포트와 연결하는 것은 가능하다.
- 절대적으로 포트 번호가 등록돼있지는 않다.





#### 3가지 포트 종류

##### 잘 알려진 포트(Well-Known 포트)

잘 알려진 유명한 프로그램들이 어떤 포트번호를 사용하는지?

ex)  네이버 웹 서버 -> 80번 포트



![포트번호](img/4%EA%B3%84%EC%B8%B5/%ED%8F%AC%ED%8A%B8%EB%B2%88%ED%98%B8.PNG)



##### 일반 사용자들이 사용하는 Dynamic 포트

![다이나믹 포트](img/4%EA%B3%84%EC%B8%B5/%EB%8B%A4%EC%9D%B4%EB%82%98%EB%AF%B9%20%ED%8F%AC%ED%8A%B8.PNG)



##### 조금 유명한 Registered 포트

어느정도 사용률이 높은 포트

![레지스터포트](img/4%EA%B3%84%EC%B8%B5/%EB%A0%88%EC%A7%80%EC%8A%A4%ED%84%B0%ED%8F%AC%ED%8A%B8.PNG)





### 연결 정보 확인하기

`netstat -ano` 명령어를 통해 현재 포트 활성 여부를 나타내는 활성 연결 테이블을 확인할 수 있다.

누가 어떤 프로세스랑 어떤 상태로 연결하고 있는지 확인 가능하다.

![활성 연결 테이블](img/4%EA%B3%84%EC%B8%B5/%ED%99%9C%EC%84%B1%20%EC%97%B0%EA%B2%B0%20%ED%85%8C%EC%9D%B4%EB%B8%94.png)



크롬창에서 네이버를 검색하고 바로 위에 있는 명령어를 검색해보자

![네이버연결1](img/4%EA%B3%84%EC%B8%B5/%EB%84%A4%EC%9D%B4%EB%B2%84%EC%97%B0%EA%B2%B01.PNG)

443포트를 사용하고 있는 어떤 주소랑 현재 내 컴퓨터에 PID가 18172인 프로세스와 연결돼있는 것을 확인할 수 있다.

작업관리자에서 해당 포트번호를 찾아보면,

![네이버연결2](img/4%EA%B3%84%EC%B8%B5/%EB%84%A4%EC%9D%B4%EB%B2%84%EC%97%B0%EA%B2%B02.PNG)

크롬이 바로 PID가 18172인 프로세스인 것을 확인할 수 있다.

