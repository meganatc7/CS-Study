# 🐥인터럽트 원리

## 🐤 인터럽트란?

- CPU가 어떤 프로그램을 실행하고 있을 때, 입출력 하드웨어 혹은 소프트웨어에 의해 예외상황이 발생하여 처리가 필요한 경우, CPU에게 이를 알려주는 것

  대부분의 컴퓨터는 한 개의 CPU를 사용하기 때문에 한번에 하나의 일만 처리할 수 있다. 따라서 어떤 일을 처리하는 도중에 우선순위가 급한 일을 처리할 필요가 있을 때 사용할 수 있는 대처방안이다.

- 예를 들어, A라는 프로그램이 CPU를 할당 받고 명령을 수행하고 있던 중 인터럽트가 발생하면 A는 현재 수행중인 명령의 위치를 저장한다. 그 후, 운영체제 내부코드인 인터럽트 처리 루틴으로 가서 인터럽트를 처리한 후, 다시 돌아와서 A 이전 작업 지점부터 수행을 계속 이어나간다.

  - 인터럽트가 발생했을 때 수행중이던 프로세스의 정보는 PCB(Process Control Block) 라고 불리는 자료구조로 커널에 저장한다.



## 🐤 컴퓨터 시스템 작동 

- 컴퓨터 내부 장치: CPU, 메모리

  컴퓨터 외부 장치: 키보드, 디스크, 마우스, 모니터 등

- 컴퓨터 업무 처리 방식

  - 입력(input): 컴퓨터 외부 장치에서 컴퓨터 내부로 데이터를 읽어오는 것
  - 출력(output): 각종 연산을 수행한 후, 그 결과를 컴퓨터 외부 장치로 내보내는 것

  - 컴퓨터 전체에 CPU 라는 중앙처리 장치가 있듯이 외부장치에는 각 하드웨어마다 컨트롤러와 로컬버퍼가 존재한다. 

    - 컨트롤러: 각 하드웨어 장치들을 제어하는 작은 CPU

    - 로컬버퍼: 각 장치마다 설치된 컨트롤러에 있는, 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리

- CPU가 수행해야 할 메모리 주소를 담고 있는 레지스터를 프로그램 카운터(Program Counter, 이하 PC)라 부른다. 즉, CPU는 매번 PC가 가리키는 메모리 영역의 명령을 처리한다. PC는 항상 바로 다음 주소의 명령을 가리키게 되어 순차적인 수행이 이루어진다.

  - 메모리에는 사용자 프로그램들과 운영체제가 같이 올라가 수행된다.

  - 예를 들어, PC가 메모리 주소 중 운영체제가 존재하는 부분을 가리키고 있다면, 현재 운영체제의 코드를 수행중이며 이 경우 CPU가 커널 모드에서 수행중이라고 말한다.

  - 반대로, PC가 사용자 프로그램이 존재하는 메모리 위치를 가리킬 경우, 그 메모리 위치에 올라가 있는 사용자 프로그램이 수행중이며 이 경우 사용자 모드에서 CPU가 수행되고 있다고 말한다.

