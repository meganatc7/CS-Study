# process synchronization 4(정리)

[toc]

## Process Synchronization

- 동기화
- concurrency control(병행 제어)
- 프로세스가 동시에 무언가를 실행하며 발생하는 문제를 해결하는 것을 의미한다.



## Solving Process Synchronization

### Semaphores(세마포어)

- P(자원 획득) / V(자원 반납) 연산으로 구성된 추상 자료형
- S라는 세마포어 변수에 대해 연산을 진행
- 세마포어를 통해 고전적인 동기화 문제를 해결할 수 있음(생산자 소비자 문제 / Readers and Writers 문제 / 철학자의 식사 문제)



### Monitor

- 동기화를 프로그래머가 직접하는 것이 아닌 모니터를 통해 자동으로 해결하도록 함 -> 오류로 인한 치명적인 문제 발생 가능성을 없애고 프로그래머의 편의를 높임
- 공유데이터와 접근 코드를 접근하여 사용
- 항상 active한 프로세스 하나만이 모니터 안의 코드를 실행할 수 있게 모니터가 제어
- lock 연산이 따로 필요 없음
- condition variable : 모니터가 프로세스의 대기를 관리하기 위해 잠들게 하고 깨우기도 함
  - wait : 잠들게 하는 것(조건 충족을 못한 경우)
  - signal : 잠들어있던 프로세스를 깨우는 것(잠든 친구가 없을 경우 아무 일도 안함)
- 모니터를 통한 고전적인 동기화 문제 해결
  - 생산자와 소비자 문제
    - 생산자 : 비어있는 버퍼가 없다면, 빈버퍼를 기다리며 대기 줄에 들어감. 차후 빈버퍼에 내용을 넣으며 소비자가 기다리고 있는지를 확인해 깨워줌 (만일 빈버퍼가 있다면 버퍼에 내용을 넣고 확인)
    - 소비자 : 차있는 버퍼가 없다면 대기 줄에 들어감. 차후 버퍼를 사용한 후에 대기 줄에 사용자가 있는지를 확인해 깨워줌(만일 차있는 버퍼가 있다면 사용하고 확인)



### Semaphores vs. Monitor

- 둘의 코드는 비슷한 매락이지만, 사실 목적이 매우 다름
  - 세마포어 : 자원 획득을 위해 프로그래머가 P/V 연산을 하는 것
  - 모니터 : 동시 접근 방지를 모니터 차원에서 지원
- 이 외에도 세마포어는 lock 혹은 뮤텍스 변수가 있고 모니터는 없다는 차이가 있다.



