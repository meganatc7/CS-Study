



# CPU Scheduling 2

[toc]

### ì§€ë‚œ ì‹œê°„ ë¦¬ë·°

#### ì»´í“¨í„° ìŠ¤ì¼€ì¤„ë§ì˜ í•„ìš”ì„±

- ì»´í“¨í„° ì‹œìŠ¤í…œ ì•ˆì˜ jobë“¤ì€ í˜¸ëª¨ ì§€ë‹ˆì–´ìŠ¤ í•˜ì§€ ì•Šê³ , I/O boundì™€ CPU bound jobì´ ì„ì—¬ìˆê¸° ë•Œë¬¸



#### Scheduling Algorithm

![algo](assets\algo.png)

##### FCFS 

- ì˜¤ë˜ ê±¸ë¦¬ëŠ” CPU ì„ ì í•  ê²½ìš° ëŒ€í™”í˜• í”„ë¡œì„¸ìŠ¤(I/O bound job)ê°€ ì˜¤ë˜ ê¸°ë‹¤ë ¤ì•¼ í•¨



##### RR 

- heterogeneous jobë“¤ì—ê²Œ íš¨ìœ¨ì ì´ë©° ê³µí‰í•¨(í• ë‹¹ëœ ì‹œê°„ì„ ë²ˆê°ˆì•„ê°€ë©° ì‚¬ìš© -> ëŒ€ê¸° ì‹œê°„ì´ í”„ë¡œì„¸ìŠ¤ê°€ cpuë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì‹œê°„ê³¼ ë¹„ë¡€)

- cf. RRì€ í”„ë¡œì„¸ê°€ CPUë¥¼ ë¹¼ì•—ê¸¸ ë•Œ contextë¥¼ ì €ì¥í•˜ê³  ë‹¤ì‹œ ì–»ëŠ” ì‹œì ì— ì €ì¥ëœ ì§€ì ë¶€í„° ì¬ê°œí•  ìˆ˜ ìˆëŠ” ë§¤ì»¤ë‹ˆì¦˜ ë•ë¶„ì— ê°€ëŠ¥



##### Multilevel Queue

- ready queueë¥¼ ì—¬ëŸ¬ ì¤„ë¡œ ë¶„í• 

![multilevel](assets\multilevel(2).png)

- ìœ„ì— ìˆì„ ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ(ê³„ê¸‰ì œ)

- íƒœì–´ë‚œ ê³„ê¸‰(ìˆœìœ„)ì— ë”°ë¼ ê²°ì •ë˜ë©° ìš°ì„  ìˆœìœ„ë¥¼ ê·¹ë³µí•  ìˆ˜ ì—†ìŒ

- issue

  - í”„ë¡œì„¸ìŠ¤ë¥¼ ì–´ë–¤ ì¤„ì— í• ë‹¹í•  ê²ƒì¸ê°€?

  - ìš°ì„  ìˆœìœ„ê°€ ë†’ì€ ì¤„ì´ ë¹„ì–´ìˆì§€ ì•Šë‹¤ë©´ ë¬´ì¡°ê±´ì ìœ¼ë¡œ ë†’ì€ ê³„ê¸‰ì—ê²Œë§Œ CPUë¥¼ í• ë‹¹í•  ê²ƒì¸ê°€?(starvation ë°œìƒ ê°€ëŠ¥)

  - ![multilevel](assets\multilevel.png)

    - ready queueë¥¼ ì—¬ëŸ¬ ê°œë¡œ ë¶„í• 

      - foreground : RR
      - background : FCFP(context switch overhead ì¤„ì´ê¸°)

      => queueì— ëŒ€í•œ ìŠ¤ì¼€ì¤„ë§ í•„ìš”

      - fixed priority scheduling : ë¬´ì¡°ê±´ ìš°ì„  ìˆœìœ„ì— ë”°ë¼ í• ë‹¹
      - Time slice : starvation ë°©ì§€ (ex. 80%ëŠ” ìš°ì„  ìˆœìœ„ê°€ ë†’ì€ í / 20%ëŠ” ë‚®ì€ íì— cpu í• ë‹¹)

- ê³µì •í•˜ì§€ ì•Šê³  ì°¨ë³„ì ì¸ ë°©ë²•

- ìš°ì„ ìˆœìœ„ê°€ ì¤‘ìš”í•˜ì§€ë§Œ ì´ì™€ ê°™ì€ ë°©ì‹ì€ ì‹ ë¶„ ë³€ê²½ ë¶ˆê°€ëŠ¥

  => Multilevel Feedback Queue ë“±ì¥



#####  Multilevel Feedback Queue

![multilevel](assets\multilevel(5).png)

![multilevel](assets\multilevel(4).png)

- Multilevel Queuì™€ ë§ˆì°¬ê°€ì§€ë¡œ ready queueê°€ ì—¬ëŸ¬ ì¤„ë¡œ ë¶„í• ë˜ì§€ë§Œ, ì¶œì‹  ë³€ê²½ì´ ê°€ëŠ¥

- issue

  - queueë¥¼ ëª‡ê°œë¥¼ ë‘˜ ê²ƒì¸ê°€
  - ê° íì— ëŒ€í•œ ìŠ¤ì¼€ì¤„ë§ì€ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€
  - ìš°ì„ ìˆœìœ„ ë³€ë™ì˜ ê¸°ì¤€ìœ¼ë¡œ ë¬´ì—‡ìœ¼ë¡œ í•  ê²ƒì¸ê°€
  - ì²˜ìŒ í”„ë¡œì„¸ìŠ¤ê°€ ë“¤ì–´ì˜¬ ë•Œ ì–´ëŠ íë¡œ ë“¤ì–´ê°ˆ ê²ƒì¸ê°€

  cf. ì£¼ë¡œ ì²˜ìŒ ë“¤ì–´ì˜¤ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ê²½ìš° ìš°ì„  ìˆœìœ„ê°€ ê°€ì¥ ë†’ì€ íì— ë„£ìŒ.

  â€‹	ìš°ì„  ìˆœìœ„ê°€ ë†’ì„ ìˆ˜ë¡ quantumì„ ì§§ê²Œ ì£¼ê³ , ìš°ì„  ìˆœìœ„ê°€ ê°€ì¥ ë‚®ì€ íëŠ” FCFS ë°©ì‹ ì‚¬ìš©

  â€‹	CPU burstê°€ ì§§ì€ í”„ë¡œì„¸ìŠ¤ëŠ” ë°”ë¡œ ëë‚¼ ìˆ˜ ìˆê³ , ë°˜ëŒ€ì˜ ê²½ìš° ì‹œê°„ì€ ì ì  ë” ë°›ê²Œ ë˜ì§€ë§Œ, ìš°ì„ ìˆœìœ„ê°€ ë–¨ì–´ì§€ê²Œ ëœë‹¤.

- CPU ì‚¬ìš© ì‹œê°„ì´ ì§§ì€ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ìš°ì„  ìˆœìœ„ ë¶€ì—¬

- í”„ë¡œì„¸ìŠ¤ë“¤ì˜ CPU ì‚¬ìš© ì‹œê°„ì— ëŒ€í•œ ì˜ˆì¸¡ì´ ë¶ˆí•„ìš”



<hr>

ì§€ê¸ˆê¹Œì§€ëŠ” CPUê°€ í•˜ë‚˜ ë¿ì¸ ì‹œìŠ¤í…œì˜ ê²½ìš°, ì•„ë˜ëŠ” CPUê°€ ì—¬ëŸ¬ ê°œ ìˆê±°ë‚˜ í˜¹ì€ deadline/threadê°€ ìˆëŠ” ë“±ì˜ ìƒí™©ì—ì„œì˜ ìŠ¤ì¼€ì¤„ë§



##### Multi-Processor Scheduling(CPUê°€ ì—¬ëŸ¬ê°œ ìˆëŠ” ê²½ìš°)

![Multi-Processor](assets\multiple.png)

- Homogenous processor : í•œ ì¤„ë¡œ ì„¸ì›Œ ì²˜ë¦¬
  - íŠ¹ì • jobì´ íŠ¹ì • CPUì—ì„œ ìˆ˜í–‰ë˜ì–´ì•¼ í•  ê²½ìš°ì—ëŠ” ì£¼ë¡œ ë¨¼ì € í• ë‹¹í•œ ë‹¤ìŒ ìŠ¤ì¼€ì¤„ë§ ì§„í–‰
- Load sharing
  - í•œ ì¤„ ì„œê¸° vs. ê°ê°ì˜ CPUë§ˆë‹¤ ì¤„ ì„œê²Œ í•˜ê¸°
- Symmetric Multiprocessing
  - ëª¨ë“  CPUë“¤ì´ ëŒ€ë“±
- Asymmetric multiprocessing
  - í•˜ë‚˜ì˜ CPUê°€ ì „ì²´ì ì¸ ì»¨íŠ¸ë¡¤ ë‹´ë‹¹(ë°ì´í„° ì ‘ê·¼ê³¼ ê³µìœ ë¥¼ ì±…ì„ì§€ê³  ë‚˜ë¨¸ì§€ëŠ” ê±°ê¸°ì— ë”°ë¦„)



##### Real-Time Scheduling

![real-time](assets\real-time.png)

- real time job : deadlineì´ ì •í•´ì ¸ìˆëŠ” ì¡(ì •í•´ì§„ ì‹œê°„ ë‚´ì— ë°˜ë“œì‹œ ì‹¤í–‰ë˜ì–´ì•¼ í•¨)
- CPU ìŠ¤ì¼€ì¤„ë§ ì‹œ ë°ë“œë¼ì¸ ë³´ì¥ Need
- real-time schedulingì€ ê·¸ë•Œ ê·¸ë•Œ ìŠ¤ì¼€ì¤„ë§í•˜ê¸°ë³´ë‹¤ëŠ” ë¯¸ë¦¬ ìŠ¤ì¼€ì¤„ë§ì„ í•˜ì—¬ ë°ë“œë¼ì¸ì´ ë³´ì¥ë˜ë„ë¡ ì ì¬ì ì†Œì— ë°°ì¹˜
- cf. ì´ëŸ° ê²½ìš°ëŠ” ì£¼ê¸°ì ì¸ ì„±ê²©ì„ ê°€ì§„ jobì´ ë§ìŒ
- Hard real-time systems : ë°˜ë“œì‹œ ë°ë“œë¼ì¸ì´ ë³´ì¥ë˜ì–´ì•¼ í•¨
- Soft real-time scheduling : ë°ë“œë¼ì¸ì„ ì§€ì¼œì•¼ í•˜ì§€ë§Œ, ê·¸ ê°•ë„ê°€ hard ë¦¬ì–¼ íƒ€ì„ ì¡ë³´ë‹¤ ê°•í•˜ì§€ ì•ŠìŒ



##### Tread Sceduling

![thread](assets\thread.png)

- cf. ìŠ¤ë ˆë“œ: í”„ë¡œì„¸ìŠ¤ í•˜ë‚˜ì— ì—¬ëŸ¬ ê°œì˜ CPU ìˆ˜í–‰ ë‹¨ìœ„ê°€ ìˆëŠ” ê²ƒ
- Local Scheduling
  - ìœ ì € ë ˆë²¨ ìŠ¤ë ˆë“œ(ìš´ì˜ ì²´ì œê°€ ìŠ¤ë ˆë“œì˜ ì¡´ì¬ë¥¼ ëª¨ë¦„, ì‚¬ìš©ìê°€ ì§ì ‘ ê´€ë¦¬)ì—ì„œ ìš´ì˜ì²´ì œëŠ” í”„ë¡œì„¸ìŠ¤ì—ê²Œ CPUë¥¼ ì¤„ ì§€ ë§ì§€ë§Œ ê²°ì •í•˜ê³ , ê·¸ í”„ë¡œì„¸ìŠ¤ì— CPUê°€ ê°”ì„ ë•Œ ì–´ë–¤ threadì—ê²Œ  CPUë¥¼ ì¤„ ì§€ëŠ” ë¡œì»¬ì—ì„œ ê²°ì •(osê°€ ì•„ë‹ˆë¼ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ê°€ ì§ì ‘ ê²°ì •)
- Global Scheduling
  - ì»¤ë„ ìŠ¤ë ˆë“œ(ìš´ì˜ ì²´ì œê°€ ìŠ¤ë ˆë“œì˜ ì¡´ì¬ë¥¼ ì•Œê³  ìˆìŒ)ì—ì„œ ìš´ì˜ ì²´ì œê°€ í”„ë¡œì„¸ìŠ¤ ìŠ¤ì¼€ì¤„ë§ í•˜ë“¯ ì–´ë–¤ ìŠ¤ë ˆë“œì—ê²Œ CPUë¥¼ ì¤„ì§€ ê²°ì •





### Algorithm Evaluation

ì–´ë–¤ ì•Œê³ ë¦¬ì¦˜ì´ ì¢‹ì€ì§€ í‰ê°€í•  ìˆ˜ ìˆëŠ” ë°©ë²•

![image-20210802183100336](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210802183100336.png)

1. Queueing models(ì´ë¡ ì ì¸ ë°©ë²•)

   - ì´ë¡ ì ì¸ ë°©ë²•
   - arrival rate(ë„ì°©ë¥ ) && service rate(ì²˜ë¦¬ìœ¨) ë“±ì„ ê³„ì‚°í•˜ì—¬ throughput(ì²˜ë¦¬ìœ¨, ë‹¨ìœ„ì‹œê°„ë‹¹ ëª‡ê°œ ì²˜ë¦¬í–ˆëŠ”ì§€), í‰ê· ì ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ê¸°ë‹¤ë ¸ëŠ”ì§€ë¥¼ ê³„ì‚°
2. Implementation(êµ¬í˜„) & Measurement(ì„±ëŠ¥ ì¸¡ì •)
   - 1ë²ˆê³¼ ìƒë°˜ëœ ê°œë…ìœ¼ë¡œ ì‹¤ì œ ì‹œìŠ¤í…œì—ë‹¤ êµ¬í˜„í•´ë³´ê³  ì¸¡ì •
3. Simulation(ëª¨ì˜ ì‹¤í—˜)
   - ìœ„ì˜ ê²½ìš°ë¥¼ ì§ì ‘í•´ë³´ê¸° ì–´ë ¤ìš´ ê²½ìš°
   - ëª¨ì˜ í”„ë¡œê·¸ë¨(ì˜ˆì œ)ë¥¼ ë§Œë“¤ì–´ì„œ ëŒë ¤ë³´ê¸°
   - trace : input ë°ì´í„°(ì‹¤ì œ í”„ë¡œê·¸ë¨ì„ ëŒë¦¬ë©° ë°ì´í„°ë¥¼ ë½‘ì•„ë³¼ ìˆ˜ë„ ìˆìŒ or ê°€ì •)



### Process Synchronization

##### ë°ì´í„°ì˜ ì ‘ê·¼

![image-20210804002731122](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804002731122.png)

- ë°ì´í„°ëŠ” ìì‹ ì´ ì €ì¥ëœ ê³³ì—ì„œ ê°’ì„ ê°€ì ¸ì™€ ì—°ì‚°í•˜ê³  ë‹¤ì‹œ ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” ë“±ì˜ ê³¼ì • ìˆ˜í–‰
- ë°ì´í„°ì— ëŒ€í•´ ì—°ì‚°, ìˆ˜ì •, ê²°ê³¼ ì €ì¥ ë“±ì„ ì§„í–‰í•˜ëŠ”ë° í”„ë¡œì„¸ìŠ¤ì— ë”°ë¼ ê·¸ ê²°ê³¼ê°’ë“¤ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ => system Synchronization

<hr>

![image-20210804002913962](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804002913962.png)

-  cpuê°€ ì—¬ëŸ¬ ê°œì¸ ê²½ìš° ê°  CPUê°€ ë‹¤ë¥¸ ì—°ì‚°ì„ ì§„í–‰í•˜ì—¬ ì›ì¹˜ ì•ŠëŠ” ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ



##### race condition

ì—¬ëŸ¬ ì£¼ì²´ê°€ í•˜ë‚˜ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ê²ƒ

![image-20210804003648823](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804003648823.png)



##### í•´ê²° ë°©ë²•

1. ìš´ì˜ì²´ì œ ì»¤ë„ì´ ì‹¤í–‰ ì¤‘ì¼ ê²½ìš° interruptë¥¼ disabled ì²˜ë¦¬(ì»¤ë„ ëª…ë ¹ì–´ê°€ ëë‚  ë•Œê¹Œì§€ ë³´ì¥)

![image-20210804003700168](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804003700168.png)

2. ì»¤ë„ ëª¨ë“œ ì¤‘ì—ëŠ” CPUë¥¼ preemptí•˜ì§€ ì•ŠìŒ(ì‹œê°„ì„ ì¡°ê¸ˆ ë” ì“°ë”ë¼ë„ ë¹¼ì•—ì§€ ì•ŠëŠ”ë‹¤.)

![image-20210804003953042](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804003953042.png)

![image-20210804004006658](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804004006658.png)

3. CPUê°€ ì—¬ëŸ¬ ê°œ ìˆëŠ” ê²½ìš°ì—ëŠ” lock ì‚¬ìš© 
   - ê°œë³„ ë°ì´í„°ì— ëŒ€í•´ lock ê±¸ê¸°
   - CPU ì „ì²´ì— ëŒ€í•œ lock ê±¸ê¸°(ë¹„íš¨ìœ¨ì )

![image-20210804004342409](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804004342409.png)

<hr>

![image-20210804004427071](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804004427071.png)



##### Critical-sectionâ—ğŸ“‘(ê³µë¶€ ë” í•„ìš”!)

ê³µìœ  ë°ì´í„°ë¥¼ ì ‘ê·¼í•˜ëŠ” ì½”ë“œ

![image-20210804004646414](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804004646414.png)

![image-20210804004717763](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20210804004717763.png)