# ğŸ¤” Memory Management

> ë©”ëª¨ë¦¬ ê´€ë¦¬



## ğŸ§ Logical vs Physical Address

### ğŸˆ Logical address(ë…¼ë¦¬ì  ì£¼ì†Œ)

##### âœ¨ í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë…ë¦­ì ‘ìœ¼ë¡œ ê°€ì§€ëŠ” ì£¼ì†Œ ê³µê°„

##### âœ¨ ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ 0ë²ˆì§€ë¶€í„° ì‹œì‘

##### âœ¨ CPUê°€ ë³´ëŠ” ì£¼ì†ŒëŠ” logical addressì„



### ğŸˆ Physical address

âœ¨ **ë©”ëª¨ë¦¬ì— ì‹¤ì œ ì˜¬ë¼ê°€ëŠ” ìœ„ì¹˜**



## ğŸ§ ì£¼ì†Œ ë°”ì¸ë”©

> **ì£¼ì†Œë¥¼ ê²°ì •í•˜ëŠ” ê²ƒ**
>
> - Symbolic Address => Logical Address => Physical Address
>
> - (*Symbolic Address : í”„ë¡œê·¸ë˜ë¨¸ ì…ì¥ì—ì„œëŠ” ì£¼ì†Œê°’ì´ ì•„ë‹Œ ë³€ìˆ˜ëª…(Symbol)ë¡œ ì‚¬ìš©í•œë‹¤. ë‚˜ì¤‘ì— ì»´íŒŒì¼ì´ ë˜ë©´ ìˆ«ì ì£¼ì†Œ(Logical Address)ê°€ ë˜ëŠ” ê²ƒì´ë‹¤.)
>
> - ì—¬ê¸°ì„œ Logical Addressì—ì„œ Physical Addressë¡œ ë„˜ì–´ê°€ëŠ” ì‹œì ì€ ì–¸ì œì¸ê°€?

![](./image/69.png)

### ğŸˆ ì£¼ì†Œ ê²°ì • ë°©ë²• 3ê°€ì§€

- Compile time binding
- Load time binding
- Execution time binding

#### ğŸ“• Compile time binding

âœ¨ **ì£¼ì†Œ ë³€í™˜ì´ ì»´íŒŒì¼ ì‹œì— ì´ë¤„ì§ˆ ë•Œ**

âœ¨ **ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì£¼ì†Œ(physical address)ê°€ ì»´íŒŒì¼ ì‹œ ì•Œë ¤ì§**

âœ¨ **ì‹œì‘ ìœ„ì¹˜ ë³€ê²½ì‹œ ì¬ì»´íŒŒì¼**

âœ¨ **ì»´íŒŒì¼ëŸ¬ëŠ” ì ˆëŒ€ ì½”ë“œ(absolute code)ìƒì„±**
(ì»´íŒŒì¼ ë˜ì–´ì„œ Logical addressì— ìˆëŠ” ì½”ë“œë¥¼ ì ˆëŒ€ì½”ë“œ)

âœ¨ **í•­ìƒ ë¬¼ë¦¬ì  ì£¼ì†Œì— ì˜¬ë¦´ ë•Œ ë…¼ë¦¬ì  ì£¼ì†Œì— ì£¼ì–´ì ¸ìˆëŠ” ì£¼ì†Œ ê·¸ëŒ€ë¡œ ì˜¬ë¦¬ê¸° ë•Œë¬¸ì— ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì— ë‹¤ë¥¸ ì£¼ì†ŒëŠ” ë¹„ì–´ìˆìŒì—ë„ ì •í•´ì§„ ìœ„ì¹˜ì—ë§Œ ì˜¬ë¦¬ê²Œ ë˜ì–´ ë¹„íš¨ìœ¨ì !!**



#### ğŸ“— Load time binding

âœ¨ **í”„ë¡œê·¸ë¨ ì‹¤í–‰ì´ ì‹œì‘ë  ë•Œ**

âœ¨ **í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ì–´ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°ˆ ë•Œ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ê²°ì •ë¨**
		(500ë²ˆ ë¶€í„° ë¹„ì–´ìˆë‹¤ë©´ 500ë²ˆ ë¬¼ë¦¬ì  ì£¼ì†Œë¶€í„° ì˜¬ë¦¼)

âœ¨ **Loaderì˜ ì±…ì„í•˜ì— ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì£¼ì†Œ ë¶€ì—¬**

âœ¨ **ì»´íŒŒì¼ëŸ¬ê°€ ì¬ë°°ì¹˜ê°€ëŠ¥ì½”ë“œ(relocatable code)ë¥¼ ìƒì„±í•œ ê²½ìš° ê°€ëŠ¥**
(í•­ìƒ íŠ¹ì •ìœ„ì¹˜ê°€ ì•„ë‹ˆë¼ ë¹„ì–´ìˆëŠ” ì–´ëŠ ìœ„ì¹˜ì—ë“  ì˜¬ë¼ ê°ˆ ìˆ˜ ìˆìŒ)



#### ğŸ“™  Execution time binding (=Run time binding)

âœ¨ **í”„ë¡œê·¸ë¨ì´ ì‹œì‘ëœ ì´í›„ì—ë„ ì‹¤í–‰í•˜ë‹¤ê°€ ì¤‘ê°„ì— ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ë°”ë€”ìˆ˜ ìˆëŠ” ë°©ë²•**

âœ¨ **ìˆ˜í–‰ì´ ì‹œì‘ëœ ì´í›„ì—ë„ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ìƒ ìœ„ì¹˜ë¥¼ ì˜®ê¸¸ ìˆ˜ ìˆìŒ**

âœ¨ **CPUê°€ ì£¼ì†Œë¥¼ ì°¸ì¡°í•  ë•Œë§ˆë‹¤ bindingì„ ì ê²€(address mapping table)**

âœ¨ **í•˜ë“œì›¨ì–´ì ì¸ ì§€ì›ì´ í•„ìš” (ex. base and limit registers, MMU)**







### ğŸˆ MMU(Memory-Management Unit)

##### âœ¨ MMU

- logical addressë¥¼ physical addressë¡œ ë§¤í•‘í•´ì£¼ëŠ” Hardware device
- ì£¼ì†Œë³€í™˜ì„ ìœ„í•œ í•˜ë“œì›¨ì–´

##### âœ¨ MMU scheme

- ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ê°€ CPUì—ì„œ ìˆ˜í–‰ë˜ë©° ìƒì„±í•´ë‚´ëŠ” ëª¨ë“  ì£¼ì†Œê°’ì— ëŒ€í•´ base registerì˜ ê°’ì„ ë”í•œë‹¤.

##### âœ¨user program

- ì‚¬ìš©ì í”„ë¡œê·¸ë¨ì€ logical addressë§Œì„ ë‹¤ë£¬ë‹¤.
- ì‹¤ì œ physical addressë¥¼ ë³¼ ìˆ˜ ì—†ìœ¼ë©° ì•Œ í•„ìš”ê°€ ì—†ë‹¤.



![](./image/70.png)

> 346ì´ë¼ëŠ” ë…¼ë¦¬ì  ì£¼ì†Œë¥¼ ë³€í™˜í•  ë•Œ MMUë¼ëŠ” í•˜ë“œì›¨ì–´ì—ì„œ ë³€í™˜ì„ í•˜ëŠ”ë° 
> ê°€ì¥ ê¸°ë³¸ì ì¸ ë³€í™˜ìœ¼ë¡œ register 2ê°œë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í™˜í•œë‹¤.
>
> - Relocation register(=base register) : ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì£¼ì†Œì˜ ìµœì†Œê°’
> - Limit register : ë…¼ë¦¬ì  ì£¼ì†Œì˜ ë²”ìœ„
>
> register ê³µê°„ì˜ limitì´ 3000ì´ì–´ì„œ 0~3000ë²”ìœ„ì˜ ê°€ìƒ ë©”ëª¨ë¦¬ë¥¼ ë§Œë“¤ê³ 
> (limit registerëŠ” í”„ë¡œê·¸ë¨ì˜ í¬ê¸°ë¥¼ ë‹´ê³  ìˆìŒ)
>
> ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì—ëŠ” í”„ë¡œì„¸ìŠ¤ p1ì´ 14000ë²ˆë¶€í„° í• ë‹¹ì´ ë˜ì–´ ìˆìœ¼ë¯€ë¡œ 14000ì—ì„œ 346ë§Œí¼ ë–¨ì–´ì§„ 14346ì´ ì£¼ì†Œê°€ í• ë‹¹ëœë‹¤.

![](./image/71.png)

> ë§Œì¼ CPUê°€ ë…¼ë¦¬ì£¼ì†Œë¥¼ ìš”ì²­í–ˆì„ ë•Œ, limit registerëŠ” limitë³´ë‹¤ í° ì£¼ì†Œë¥¼ ìš”ì²­í–ˆëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.
>
> ë§Œì¼ ë” í¬ë‹¤ë©´ trapì— ê±¸ë¦¬ê²Œ ë˜ê³  cpuì˜ ìš´ì˜ê¶Œì´ í”„ë¡œê·¸ë¨ì—ì„œ OSë¡œ ë„˜ì–´ê°€ì„œ ì™œ trapì´ ê±¸ë ¸ëŠ”ì§€ íŒŒì•…ì„ í•œë‹¤. ê·¸ë˜ì„œ í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•˜ê²Œ ëœë‹¤.(ì•…ì˜ì ì¸ í”„ë¡œê·¸ë¨ì´ë¼ë©´ ì‘ì§•ì„!!)





### ğŸˆ Some Terminologies

ëª‡ê°€ì§€ ìš©ì–´

- Dynamic Loading

- Dynamic Linking

- Overlays

- Swapping



#### ğŸ“• Dynamic Loading

> Loading: ë©”ëª¨ë¦¬ë¡œ ì˜¬ë¦¬ëŠ” ê²ƒ
>
> Dynamic Loading: ë©”ëª¨ë¦¬ì— ë™ì ìœ¼ë¡œ ì˜¬ë¦°ë‹¤!!

âœ¨ **í”„ë¡œì„¸ìŠ¤ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ë¯¸ë¦¬ ë‹¤ ì˜¬ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•´ë‹¹ ë£¨í‹´ì´ ë¶ˆë ¤ì§ˆ ë•Œ ë©”ëª¨ë¦¬ì— loadí•˜ëŠ” ê²ƒ**

âœ¨ **memory utilizationì˜ í–¥ìƒ**

âœ¨ **ê°€ë”ì”© ì‚¬ìš©ë˜ëŠ” ë§ì€ ì–‘ì˜ ì½”ë“œì˜ ê²½ìš° ìœ ìš©**(ex. ì˜¤ë¥˜ ì²˜ë¦¬ ë£¨í‹´)

âœ¨ **ìš´ì˜ì²´ì œì˜ íŠ¹ë³„í•œ ì§€ì› ì—†ì´ í”„ë¡œê·¸ë¨ ìì²´ì—ì„œ êµ¬í˜„ ê°€ëŠ¥(OSëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì§€ì› ê°€ëŠ¥)**



#### ğŸ“˜ Dynamic Linking

âœ¨ **Linkingì„ ì‹¤í–‰ ì‹œê°„ê¹Œì§€ ë¯¸ë£¨ëŠ” ê¸°ë²•**

âœ¨ **Static linking**

- ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ íŒŒì¼ ì½”ë“œì— í¬í•¨ë¨
- ì‹¤í–‰ íŒŒì¼ì˜ í¬ê¸°ê°€ ì»¤ì§
- ë™ì¼í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ë¯€ë¡œ ë©”ëª¨ë¦¬ ë‚­ë¹„(ex. printf í•¨ìˆ˜ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œ)

âœ¨ **Dynamic linking**

- ë§í¬ëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ í•˜ë‚˜ë¡œ ë¬¶ëŠ”ê±¸ ë§í¬ë¼ê³  í•˜ëŠ”ë° ì´ë•Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œëŠ” ë™ì ìœ¼ë¡œ ë§í¬ì‹œí‚¤ëŠ” ê²ƒ

- ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì‹¤í–‰ ì‹œ ì—°ê²°(link) ë¨
- ì½”ë“œ ì‹¤í–‰í•˜ë‹¤ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸ì¶œë˜ëŠ” ë¶€ë¶„ì— ì´ë¥´ë©´,
- ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸ì¶œ ë¶€ë¶„ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ ë£¨í‹´ì˜ ìœ„ì¹˜ë¥¼ ì°¾ê¸° ìœ„í•œ stubì´ë¼ëŠ” ì‘ì€ ì½”ë“œë¥¼ ë‘ 
- ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì´ë¯¸ ë©”ëª¨ë¦¬ì— ìˆìœ¼ë©´ ê·¸ ë£¨í‹´ì˜ ì£¼ì†Œë¡œ ê°€ê³  ì—†ìœ¼ë©´ ë””ìŠ¤í¬ì—ì„œ ì½ì–´ì˜´
- ìš´ì˜ì²´ì œì˜ ë„ì›€ì´ í•„ìš”



#### ğŸ“— Overlays

âœ¨ **ë©”ëª¨ë¦¬ì— í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ë¶„ ì¤‘ ì‹¤ì œ í•„ìš”í•œ ì •ë³´ë§Œì„ ì˜¬ë¦¼**

âœ¨ **í”„ë¡œì„¸ìŠ¤ì˜ í¬ê¸°ê°€ ë©”ëª¨ë¦¬ë³´ë‹¤ í´ ë•Œ ìœ ìš©**

âœ¨ **ìš´ì˜ì²´ì œì˜ ì§€ì›ì—†ì´ ì‚¬ìš©ìì— ì˜í•´ êµ¬í˜„(í”„ë¡œê·¸ë˜ë¨¸ì˜ ì½”ë”©ì— ì˜í•´ êµ¬í˜„)**

âœ¨ **ì‘ì€ ê³µê°„ì˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ë˜ ì´ˆì°½ê¸° ì‹œìŠ¤í…œì—ì„œ ìˆ˜ì‘ì—…ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë¨¸ê°€ êµ¬í˜„**

- Manual Overlay
- í”„ë¡œê·¸ë˜ë°ì´ ë§¤ìš° ë³µì¡



#### ğŸ“™ Swapping

âœ¨ **Swapping**

- í”„ë¡œì„¸ìŠ¤ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ë©”ëª¨ë¦¬ì—ì„œ backing storeë¡œ ì«“ì•„ë‚´ëŠ” ê²ƒ

âœ¨ **Backing store (=swap area)**

- ë””ìŠ¤í¬: ë§ì€ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹´ì„ ë§Œí¼ ì¶©ë¶„íˆ ë¹ ë¥´ê³  í° ì €ì¥ ê³µê°„

âœ¨ **Swap in / Swap out**

- ì¼ë°˜ì ìœ¼ë¡œ ì¤‘ê¸° ìŠ¤ì¼€ì¤„ëŸ¬(swapper)ì— ì˜í•´ swap out ì‹œí‚¬ í”„ë¡œì„¸ìŠ¤ ì„ ì •
- priority-based CPU scheduling algorithm
  - priorityê°€ ë‚®ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ swapped out ì‹œí‚´
  - priorityê°€ ë†’ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ ë†“ìŒ
- Compile time í˜¹ì€ load time bindingì—ì„œëŠ” ì›ë˜ ëª¨ë©”ë¦¬ ìœ„ì¹˜ë¡œ swap in í•´ì•¼ í•¨
- Execution time bindingì—ì„œëŠ” ì¶”í›„ ë¹ˆ ë©”ëª¨ë¦¬ ì˜ì—­ ì•„ë¬´ ê³³ì—ë‚˜ ì˜¬ë¦´ ìˆ˜ ìˆìŒ
- swap timeì€ ëŒ€ë¶€ë¶„ transfer time (swapë˜ëŠ” ì–‘ì— ë¹„ë¡€í•˜ëŠ” ì‹œê°„)ì„

![](./image/72.png)





### ğŸˆ Allocation of Physical Memory

> ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ê´€ë¦¬

![](./image/73.png)

#### ğŸ“— **ë©”ëª¨ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‘ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰˜ì–´ ì‚¬ìš©ëœë‹¤.**

âœ¨ **OS ìƒì£¼ ì˜ì—­**

- interrupt vectorì™€ í•¨ê»˜ ë‚®ì€ ì£¼ì†Œ ì˜ì—­ ì‚¬ìš©

âœ¨ **ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ ì˜ì—­**

- ë†’ì€ ì£¼ì†Œ ì˜ì—­ ì‚¬ìš©



#### ğŸ“• ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ ì˜ì—­ì˜ í• ë‹¹ ë°©ë²•

âœ¨  **Contiguous allocation(ì—°ì†í• ë‹¹)**

- í”„ë¡œê·¸ë¨ì´ ë©”ëª¨ë¦¬ì˜ í•œêµ°ë°ì— í†µì§¸ë¡œ ì˜¬ë¼ê°€ëŠ” ê²ƒ

- ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ì˜ ì—°ì†ì ì¸ ê³µê°„ì— ì ì¬ë˜ë„ë¡ í•˜ëŠ” ê²ƒ

- ###### Fixed partition allocation(ê³ ì • ë¶„í•  ë°©ì‹)

  - ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ë¥¼ ëª‡ ê°œì˜ ì˜êµ¬ì  ë¶„í• (partition)ë¡œ ë‚˜ëˆ”
  - ë¶„í• ì˜ í¬ê¸°ê°€ ëª¨ë‘ ë™ì¼í•œ ë°©ì‹ê³¼ ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ì´ ì¡´ì¬
  - ë¶„í• ë‹¹ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ ì ì¬
  - ìœµí†µì„±ì´ ì—†ìŒ
    - ë™ì‹œì— ë©”ëª¨ë¦¬ì— loadë˜ëŠ” í”„ë¡œê·¸ë¨ì˜ ìˆ˜ê°€ ê³ ì •ë¨
    - ìµœëŒ€ ìˆ˜í–‰ ê°€ëŠ¥ í”„ë¡œê·¸ë¨ í¬ê¸° ì œí•œ
  - Internal fragmentation ë°œìƒ (external fragmentationë„ ë°œìƒ)

- ###### Variable partition allocation(ê°€ë³€ ë¶„í•  ë°©ì‹)

  - í”„ë¡œê·¸ë¨ì˜ í¬ê¸°ë¥¼ ê³ ë ¤í•´ì„œ í• ë‹¹
  - ë¶„í• ì˜ í¬ê¸°, ê°œìˆ˜ê°€ ë™ì ìœ¼ë¡œ ë³€í•¨
  - ê¸°ìˆ ì  ê´€ë¦¬ ê¸°ë²• í•„ìš”
  - External fragmentation ë°œìƒ

![](./image/74.png)

> **ê³ ì •ë¶„í• ë°©ì‹**: í”„ë¡œê·¸ë¨Aì˜ ê²½ìš° ë¶„í• 1ì— í¬ê¸°ê°€ ë§ì•„ì„œ ë“¤ì–´ê°€ê³ , Bì˜ ê²½ìš° ì»¤ì„œ 2ë¥¼ ê±´ë„ˆ ë›°ê³  3ì— ë“¤ì–´ê°„ë‹¤. 
>
> ì™¸ë¶€ì¡°ê°(External fragmentation) : í”„ë¡œê·¸ë¨ì´ ë„ˆë¬´ ì»¤ì„œ ê±´ë„ˆ ë›°ì–´ ë°œìƒ
>
> ë‚´ë¶€ì¡°ê°(Internal fragmentation) : í”„ë¡œê·¸ë¨ì´ ë¶„í•  ê³µê°„ë³´ë‹¤ëŠ” ì‘ì•„ì„œ ë°œìƒ
>
> **ê°€ë³€ë¶„í• ë°©ì‹**: ë¶„í• ì„ ë‚˜ëˆ ë†“ì§€ ì•Šê³  í”„ë¡œê·¸ë¨ì˜ í¬ê¸°ë§Œí¼ í• ë‹¹ì„ í•˜ëŠ” ê²ƒì´ë‹¤.
>
> í”„ë¡œê·¸ë¨Bê°€ ëë‚˜ê³  ë‚˜ë©´ ê·¸ ê³µê°„ì— Dê°€ ë“¤ì–´ê°€ê¸°ì—ëŠ” ì‘ì•„ì„œ ì™¸ë¶€ì¡°ê°ìœ¼ë¡œ ë‚¨ê³  DëŠ” ë‹¤ë¥¸ ê³µê°„ì— ë“¤ì–´ê°„ë‹¤.

- ###### Hole

  - ê°€ìš© ë©”ëª¨ë¦¬ ê³µê°„
  - ë‹¤ì–‘í•œ í¬ê¸°ì˜ holeë“¤ì´ ë©”ëª¨ë¦¬ ì—¬ëŸ¬ ê³³ì— í©ì–´ì ¸ ìˆìŒ
  - í”„ë¡œì„¸ìŠ¤ê°€ ë„ì°©í•˜ë©´ ìˆ˜ìš©ê°€ëŠ¥í•œ holeì„ í• ë‹¹
  - ìš´ì˜ì²´ì œëŠ” ë‹¤ìŒì˜ ì •ë³´ë¥¼ ìœ ì§€
    - a) í• ë‹¹ê³µê°„    b) ê°€ìš©ê³µê°„(hole)

![](./image/75.png)

- ###### Dynamic Storage-Allocation Problem

  - ê°€ë³€ ë¶„í•  ë°©ì‹ì—ì„œ size nì¸ ìš”ì²­ì„ ë§Œì¡±í•˜ëŠ” ê°€ì¥ ì ì ˆí•œ holeì„ ì°¾ëŠ” ë¬¸ì œ
  - First-fit
    - Sizeê°€ n ì´ìƒì¸ ê²ƒ ì¤‘ ìµœì´ˆë¡œ ì°¾ì•„ì§€ëŠ” holeì— í• ë‹¹
  - Best-fit
    - Sizeê°€ n ì´ìƒì¸ ê°€ì¥ ì‘ì€ holeì„ ì°¾ì•„ì„œ í• ë‹¹
    - Holeë“¤ì˜ ë¦¬ìŠ¤íŠ¸ê°€ í¬ê¸°ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì§€ ì•Šì€ ê²½ìš° ëª¨ë“  holeì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ íƒìƒ‰í•´ì•¼í•¨
    - ë§ì€ ìˆ˜ì˜ ì•„ì£¼ ì‘ì€ holeë“¤ì´ ìƒì„±ë¨
  - Worst-fit
    - ê°€ì¥ í° holeì— í• ë‹¹
    - ì—­ì‹œ ëª¨ë“  ë¦¬ìŠ¤íŠ¸ë¥¼ íƒìƒ‰í•´ì•¼ í•¨
    - ìƒëŒ€ì ìœ¼ë¡œ ì•„ì£¼ í° holeë“¤ì´ ìƒì„±ë¨
    - First-fitê³¼ Best-fitì´ ë³´ë‹¤ ì†ë„ì™€ ê³µê°„ ì´ìš©ë¥  ì¸¡ë©´ì—ì„œ íš¨ê³¼ì ì¸ ê²ƒìœ¼ë¡œ ì•Œë ¤ì§

- ###### compaction

  - external fragmentationë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” í•œ ê°€ì§€ ë°©ë²•
  - ì‚¬ìš© ì¤‘ì¸ ë©”ëª¨ë¦¬ ì˜ì—­ì„ í•œêµ°ë°ë¡œ ëª°ê³  holeë“¤ì„ ë‹¤ë¥¸ í•œ ê³³ìœ¼ë¡œ ëª°ì•„ í° blockì„ ë§Œë“œëŠ” ê²ƒ
  - ë§¤ìš° ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ë°©ë²•
  - ìµœì†Œí•œì˜ ë©”ëª¨ë¦¬ ì´ë™ìœ¼ë¡œ compactioní•˜ëŠ” ë°©ë²•(ë§¤ìš° ë³µì¡í•œ ë¬¸ì œ)
  - compactionì€ í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œê°€ ì‹¤í–‰ ì‹œê°„ì— ë™ì ìœ¼ë¡œ ì¬ë°°ì¹˜ ê°€ëŠ¥í•œ ê²½ìš°ì—ë§Œ ìˆ˜í–‰ë  ìˆ˜ ìˆë‹¤.



âœ¨ **Noncontiguous allocation(ë¶ˆì—°ì†í• ë‹¹)**

- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ì˜ ì—¬ëŸ¬ ì˜ì—­ì— ë¶„ì‚°ë˜ì–´ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆìŒ

- ###### Paging

  - (ê¸°ì¡´ ë ˆì§€ìŠ¤í„° 2ê°œë¡œ ì£¼ì†Œë³€í™˜ì„ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” ë¶ˆê°€ëŠ¥í•¨)
    (ê°ê°ì˜ í˜ì´ì§€ë“¤ì´ ì–´ëŠ ì£¼ì†Œì— ì˜¬ë¼ê°€ìˆëŠ”ì§€ ì•Œì•„ë‚´ê¸° ìœ„í•´ì„  í˜ì´ì§€ë³„ë¡œ ì£¼ì†Œë¥¼ ê³„ì‚°í•´ì¤˜ì•¼í•¨)

  - Processì˜ virtual memoryë¥¼ ë™ì¼í•œ ì‚¬ì´ì¦ˆì˜ pageë‹¨ìœ„ë¡œ ë‚˜ëˆ”

  - Virtual memoryì˜ ë‚´ìš©ì´ pageë‹¨ìœ„ë¡œ noncontiguousí•˜ê²Œ ì €ì¥ë¨

  - ì¼ë¶€ëŠ” backing storageì—, ì¼ë¶€ëŠ” physical memoryì— ì €ì¥

  - **Basic Method**
    - physical memoryë¥¼ ë™ì¼í•œ í¬ê¸°ì˜ frameìœ¼ë¡œ ë‚˜ëˆ”
    - logical memoryë¥¼ ë™ì¼ í¬ê¸°ì˜ pageë¡œ ë‚˜ëˆ”(frameê³¼ ê°™ì€ í¬ê¸°)
    - ëª¨ë“  ê°€ìš© frameë“¤ì„ ê´€ë¦¬
    - page tableì„ ì‚¬ìš©í•˜ì—¬ logical addressë¥¼ physical addressë¡œ ë³€í™˜
      (ê°ê°ì˜ pageë§ˆë‹¤ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì–´ë””ì— ìˆëŠ”ì§€ tableì— ê¸°ë¡)
      (page tableì€ í”„ë¡œê·¸ë¨ë§ˆë‹¤ ë³„ë„ë¡œ í…Œì´ë¸”ì´ ì¡´ì¬í•´ì•¼ í•œë‹¤.)
    - External fragmentation ë°œìƒ ì•ˆí•¨
    - Internal fragmentation ë°œìƒ ê°€ëŠ¥
      (í”„ë¡œê·¸ë¨ì˜ í¬ê¸°ê°€ ê¼­ page í¬ê¸°ì™€ ê¼­ ë“¤ì–´ë§ì„ ìˆœ ì—†ë‹¤.)

  - ![](./image/76.png)

  - > në²ˆì§¸ í˜ì´ì§€ë¥¼ ì£¼ì†Œë³€í™˜í•˜ê³  ì‹¶ìœ¼ë©´ ìœ„ì—ì„œ në²ˆ ì—”í„°ë¦¬ë¥¼ íƒìƒ‰í•˜ê³  ëª‡ë²ˆ í”„ë ˆì„ì— ë“¤ì–´ê°€ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.

  - ![](08.%20Memory%20Management.assets/77.png)

  - > ì£¼ì†Œë³€í™˜ ì‹œ í˜ì´ì§€ í…Œì´ë¸”ì„ ì‚¬ìš©í•œë‹¤. ê·¸ë˜ì„œ ì£¼ì†Œì—ì„œ ì•ë¶€ë¶„(p)ì´ í˜ì´ì§€ ë²ˆí˜¸ê°€ ë˜ê³ 
    >
    > ë’·ë¶€ë¶„ì´ í˜ì´ì§€ ë‚´ì—ì„œ ì–¼ë§Œí¼ ë–¨ì–´ì ¸ìˆëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” offsetì´ ëœë‹¤.

  - ###### page table

    - ìœ„ ê·¸ë¦¼ì—ì„œëŠ” í…Œì´ë¸”ì— í˜ì´ì§€ê°€ 4ê°œì´ì§€ë§Œ ì‚¬ì‹¤ í•œ í”„ë¡œê·¸ë¨ì„ í˜ì´ì§€ë¡œ ìª¼ê°œë©´ 100ë§Œê°œ ì •ë„ëŠ” í•„ìš”í•˜ë©°, ê° í”„ë¡œê·¸ë¨ë§ˆë‹¤ í…Œì´ë¸”ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— registerë‚˜ cacheì— tableì„ ì˜¬ë ¤ë†“ê¸°ì—ëŠ” ìš©ëŸ‰ì´ ë„ˆë¬´ í¬ë‹¤.

    - page tableì€ main memoryì— ìƒì£¼ (ìš©ëŸ‰ì´ í¬ê¸°ë•Œë¬¸ì—)

    - Page-table base register(PTBR)ê°€ page tableì„ ê°€ë¦¬í‚´ 
      (ê¸°ì¡´ ì£¼ì†Œë³€í™˜ í•˜ë˜ ë ˆì§€ìŠ¤í„°ê°€ í•´ë‹¹ ì—­í• ì„ í•¨)

    - Page-table length register(PTLR)ê°€ í…Œì´ë¸” í¬ê¸°ë¥¼ ë³´ê´€
      (ê¸°ì¡´ ì£¼ì†Œë³€í™˜ í•˜ë˜ ë ˆì§€ìŠ¤í„°ê°€ í•´ë‹¹ ì—­í• ì„ í•¨)

    - ëª¨ë“  ë©”ëª¨ë¦¬ ì ‘ê·¼ ì—°ì‚°ì—ëŠ” 2ë²ˆì˜ memory access í•„ìš”

    - page table ì ‘ê·¼ 1ë²ˆ, ì‹¤ì œ data/instruction ì ‘ê·¼ 1ë²ˆ

    - ì†ë„ í–¥ìƒì„ ìœ„í•´ associative register í˜¹ì€ translation look-aside buffer(TLB)ë¼ ë¶ˆë¦¬ëŠ” ê³ ì†ì˜ lookup hardware cache ì‚¬ìš©

    - ![](./image/78.png)

    - > TLBëŠ” ì£¼ì†Œë³€í™˜ì„ ìœ„í•œ ìºì‹œë©”ëª¨ë¦¬
      >
      > page tableì—ì„œ ë¹ˆë²ˆíˆ ì°¸ì¡°ë˜ëŠ” ì¼ë¶€ ì—”íŠ¸ë¦¬ë¥¼ ìºì‹±í•˜ëŠ” ê²ƒì´ë‹¤.
      >
      > - Associative registers(TLB): parallel searchê°€ ê°€ëŠ¥
      >   - TLBì—ëŠ” page table ì¤‘ ì¼ë¶€ë§Œ ì¡´ì¬
      > - Address translation
      >   - page table ì¤‘ ì¼ë¶€ê°€ associative registerì— ë³´ê´€ë˜ì–´ ìˆìŒ
      >   - ë§Œì•½ í•´ë‹¹ page #ê°€ associative registerì— ìˆëŠ” ê²½ìš° ê³§ë°”ë¡œ frame #ë¥¼ ì–»ìŒ
      >   -  ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° main memoryì— ìˆëŠ” page tableë¡œë¶€í„° frame #ë¥¼ ì–»ìŒ
      >   - TLBëŠ” context switch ë•Œ flush (remove old entries)

  - ###### 2ë‹¨ê³„ page table

    - ![](./image/79.png)
    - í˜ì´ì§€ í…Œì´ë¸”ì„ ìœ„í•œ ê³µê°„ì„ ì¤„ì´ê¸° ìœ„í•¨ì´ ëª©ì ì´ë‹¤.
    - í˜„ëŒ€ì˜ ì»´í“¨í„°ëŠ” address spaceê°€ ë§¤ìš° í° í”„ë¡œê·¸ë¨ ì§€ì›
      - 32 bit address ì‚¬ìš© ì‹œ: 2^32 (4GB)ì˜ ì£¼ì†Œ ê³µê°„
        - page sizeê°€ 4K ì‹œ 1Mê°œì˜ page table entry í•„ìš”
        - ê° page entryê°€ 4Bì‹œ í”„ë¡œì„¸ìŠ¤ë‹¹ 4Mì˜ page table í•„ìš”
        - ê·¸ëŸ¬ë‚˜, ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë¨ì€ 4Gì˜ ì£¼ì†Œ ê³µê°„ ì¤‘ ì§€ê·¹íˆ ì¼ë¶€ë¶„ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ page tableê³µê°„ì´ ì‹¬í•˜ê²Œ ë‚­ë¹„ë¨
    - page table ìì²´ë¥¼ pageë¡œ êµ¬ì„±
    - ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì£¼ì†Œ ê³µê°„ì— ëŒ€í•œ outer page tableì˜ ì—”íŠ¸ë¦¬ ê°’ì€ NULL(ëŒ€ì‘í•˜ëŠ” inner page tableì´ ì—†ìŒ) ì¦‰, ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” í˜ì´ì§€ë§Œ page tableì— ë§Œë“¤ì–´ì ¸ì„œ ê³µê°„ì„ ê°–ê³  ê·¸ë ‡ì§€ ì•Šì€ ê²ƒë“¤ì€ NULLë¡œ ë¹ˆê³µê°„ìœ¼ë¡œ ìˆê²Œ ëœë‹¤. ê·¸ë˜ì„œ ìƒë‹¹íˆ ë§ì€ ê³µê°„ì´ ë¹„ì–´ì„œ ë‚¨ì•„ ìˆì„ ìˆ˜ ìˆê²Œ ëœë‹¤.(1ë‹¨ê³„ page tableì—ì„œëŠ” ë¹ˆê³µê°„ì´ ìˆì„ ìˆ˜ê°€ ì—†ìŒ)
      => ê³µê°„ íš¨ìœ¨ì„±!!

- Segmentation

  - í”„ë¡œê·¸ë¨ì˜ ì£¼ì†Œê³µê°„ì„ ì˜ë¯¸ìˆëŠ” ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒ

- Paged Segmentation