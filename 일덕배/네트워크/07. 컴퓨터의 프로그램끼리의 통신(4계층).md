# 🤔 컴퓨터의 프로그램끼리의 통신

> ##### 이전까지는,
>
> 2계층에서 가까운 컴퓨터끼리 넘어가는것 보고
>
> 3계층에서 다른 네트워크 대역으로 넘어가는것 확인하였다.
>
> 어떻게든 지금 멀리 있는 다른 컴퓨터까지는 간 것이다.
>
> ##### 이제는,
>
> 다른 사람의 컴퓨터에서 동작하고 있는 여러 프로그램 중 특정 프로그램과
> 내 컴퓨터에서 동작하고 있는 여러 프로그램중 특정 프로그램이 
> 서로 어떻게 데이터를 주고 받는지 알아본다.
> (ex. 내 카톡 -> 상대방 카톡, 크롬 브라우저 -> 네이버)



## 🧐 4계층 프로토콜(전송계층)

> 송신자의 프로세스와 수신자의 프로세스를 연결하는 통신 서비스를 제공한다.
> (*프로세스: 메모리에서 동작 중인 프로그램)
>
> 전송 계층은 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어, 그리고 다중화와 같은 편리한 서비스를 제공한다.

전송 프로토콜 중 가장 잘 알려진 것은 연결 지향 전송 방식을 사용하는 전송 제어 프로토콜(TCP)이다. 보다 단순한 전송에 사용되는 사용자 데이터 프로그램 프로토콜(UDP)도 있다.



#### ▪ 프로토콜의 종류

전송 프로토콜 중 가장 잘 알려진 것은 연결 지향 전송 방식을 사용하는 TCP,
보다 단순한 전송에 사용되는 UDP가 대표적이다.

**✨ UDP 프로토콜**

- 비연결형 지향 프로토콜(안전한 연결을 지향하지 않음)
- 연결을 하든 말든 일단 데이터를 던짐.(ex. 이해하든말든 수업 진행)
- 불친절하지만 과정은 단순

**✨ TCP 프로토콜**

- 안전한 연결을 지향하는 프로토콜. 
- 상대방과 통신을 하며 상대방이 받았다는 신호 보내면 다음꺼 보내고 이런 형식(ex.수업 진행하면서 이해했는지 체크)
- 친절한 만큼 과정이 복잡





#### ▪ 포트번호(4계층에서 사용하는 주소)

##### **1. 특징**

- 내 컴퓨터에서 사용하는 특정 `프로그램`이 사용하는 주소

- 특정 프로세스와 특정 프로세스가 통신을 하기 위해 사용한다.
- 하나의 포트는 하나의 프로세스만 사용 가능하다
- 하나의 프로세스가 여러 개의 포트를 사용하는 것은 가능하다
- 포트 번호는 일반적으로 정해져 있지만 무조건 지켜야 하는 것은 아니다
- 예를 들어 일반적으로 웹 서비스는 80번을 사용하지만 웹 서비스가 항상 80번을 사용해야만 하는 것은 아니다.





##### 2. Well-Known 포트

![](.\image\18.png)

- 잘 알려진 포트번호(무조건은 아님)

- 보통 우리가 웹을 사용할 때 웹 브라우저를 쓰는데, 

- 네이버 웹툰을 볼 때 웹 브라우저와 네이버 서버가 연결되는 것이다.

- 이때 네이버 서버가 80번 포트번호(HTTP)를 사용한다.
- (실제로 naver.com:80과 naver.com:443 이외의 다른 번호를 주소창에 검색하면 페이지를 찾지 못한다.)



##### 3. Registered 포트(조금은 유명한)

![](.\image\19.png)



##### 4. 일반 사용자들이 사용하는 Dynamic포트

- (49152~65535번)

- 상대방의 프로그램에 연결할 때 쓰는 포트번호

ex. 상대방이 80일때 내 프로그램과 연결할 때 나는 49125~65535 중 하나 골라서 쓴다.

크롬이 네이버와 연결이 될 때 크롬은 49125~65535 중 하나 골라서 사용한다.

![](.\image\20.png)





#### ▪ 프로그램 연결 정보

나와 현재 연결되어 있는 컴퓨터들

netstat -ano 명령어로 확인

![](.\image\21.png)



![](.\image\22.png)

네이버라는 외부 주소와 내 컴퓨터에서 실행중인 크롬 포트번호